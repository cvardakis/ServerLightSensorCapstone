{"ast":null,"code":"var _jsxFileName = \"/Users/connorvardakis/WebstormProjects/DenoLightPollution/frontend/src/SensorStatus.js\";\n// src/SensorStatus.js\nimport React, { useState, useEffect } from 'react';\nfunction SensorStatus() {\n  const [status, setStatus] = useState(null);\n  const [latestMeasurement, setLatestMeasurement] = useState(null);\n  console.log(\"Getting status...\");\n  useEffect(() => {\n    // Adjust the URL if needed, e.g., http://localhost:8000/sensorData/latest\n    fetch('http://localhost:8000/sensorData/latest').then(res => {\n      console.log(\"Response status:\", res.status);\n      return res.json();\n    }).then(data => {\n      console.log(\"Fetched sensor data:\", data);\n      setLatestMeasurement(data);\n\n      // Check if data contains a valid timestamp\n      if (data && data.timestamp) {\n        const reportedTime = new Date(data.timestamp);\n        const now = new Date();\n        const diffMinutes = (now - reportedTime) / 1000 / 60;\n        console.log(\"Time difference in minutes:\", diffMinutes);\n        setStatus(diffMinutes <= 10 ? 'online' : 'offline');\n      } else {\n        console.error(\"No valid timestamp in data:\", data);\n      }\n    }).catch(err => console.error('Error fetching sensor status:', err));\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 13\n    }\n  }, \"Sensor Status\"), /*#__PURE__*/React.createElement(\"button\", {\n    style: {\n      background: status === 'online' ? 'green' : 'red',\n      color: 'white',\n      padding: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }\n  }, status ? status === 'online' ? 'Online' : 'Offline' : 'Loading...'), latestMeasurement && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 25\n    }\n  }, \"Latest Measurement:\"), \" \", latestMeasurement.value, \" mag/arcsec\", /*#__PURE__*/React.createElement(\"sup\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 98\n    }\n  }, \"2\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 25\n    }\n  }, \"Timestamp:\"), ' ', new Date(latestMeasurement.timestamp).toLocaleString())));\n}\nexport default SensorStatus;","map":{"version":3,"names":["React","useState","useEffect","SensorStatus","status","setStatus","latestMeasurement","setLatestMeasurement","console","log","fetch","then","res","json","data","timestamp","reportedTime","Date","now","diffMinutes","error","catch","err","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","background","color","padding","value","toLocaleString"],"sources":["/Users/connorvardakis/WebstormProjects/DenoLightPollution/frontend/src/SensorStatus.js"],"sourcesContent":["// src/SensorStatus.js\nimport React, { useState, useEffect } from 'react';\n\nfunction SensorStatus() {\n    const [status, setStatus] = useState(null);\n    const [latestMeasurement, setLatestMeasurement] = useState(null);\n    console.log(\"Getting status...\");\n\n    useEffect(() => {\n        // Adjust the URL if needed, e.g., http://localhost:8000/sensorData/latest\n        fetch('http://localhost:8000/sensorData/latest')\n            .then((res) => {\n                console.log(\"Response status:\", res.status);\n                return res.json();\n            })\n            .then((data) => {\n                console.log(\"Fetched sensor data:\", data);\n                setLatestMeasurement(data);\n\n                // Check if data contains a valid timestamp\n                if (data && data.timestamp) {\n                    const reportedTime = new Date(data.timestamp);\n                    const now = new Date();\n                    const diffMinutes = (now - reportedTime) / 1000 / 60;\n                    console.log(\"Time difference in minutes:\", diffMinutes);\n                    setStatus(diffMinutes <= 10 ? 'online' : 'offline');\n                } else {\n                    console.error(\"No valid timestamp in data:\", data);\n                }\n            })\n            .catch((err) => console.error('Error fetching sensor status:', err));\n    }, []);\n\n    return (\n        <div>\n            <h2>Sensor Status</h2>\n            <button\n                style={{\n                    background: status === 'online' ? 'green' : 'red',\n                    color: 'white',\n                    padding: '10px',\n                }}\n            >\n                {status ? (status === 'online' ? 'Online' : 'Offline') : 'Loading...'}\n            </button>\n            {latestMeasurement && (\n                <div>\n                    <p>\n                        <strong>Latest Measurement:</strong> {latestMeasurement.value} mag/arcsec<sup>2</sup>\n                    </p>\n                    <p>\n                        <strong>Timestamp:</strong>{' '}\n                        {new Date(latestMeasurement.timestamp).toLocaleString()}\n                    </p>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default SensorStatus;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}