{"ast":null,"code":"// src/SensorStatus.js\nimport React,{useState,useEffect}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SensorStatus(){const[status,setStatus]=useState(null);const[latestMeasurement,setLatestMeasurement]=useState(null);console.log(\"Getting status...\");useEffect(()=>{// Adjust the URL if needed, e.g., http://localhost:8000/sensorData/latest\nfetch('http://localhost:8000/sensorData/latest').then(res=>{console.log(\"Response status:\",res.status);return res.json();}).then(data=>{console.log(\"Fetched sensor data:\",data);setLatestMeasurement(data);// Check if data contains a valid timestamp\nif(data&&data.timestamp){const reportedTime=new Date(data.timestamp);const now=new Date();const diffMinutes=(now-reportedTime)/1000/60;console.log(\"Time difference in minutes:\",diffMinutes);setStatus(diffMinutes<=10?'online':'offline');}else{console.error(\"No valid timestamp in data:\",data);}}).catch(err=>console.error('Error fetching sensor status:',err));},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Sensor Status\"}),/*#__PURE__*/_jsx(\"button\",{style:{background:status==='online'?'green':'red',color:'white',padding:'10px'},children:status?status==='online'?'Online':'Offline':'Loading...'}),latestMeasurement&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Latest Measurement:\"}),\" \",latestMeasurement.value,\" mag/arcsec\",/*#__PURE__*/_jsx(\"sup\",{children:\"2\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Timestamp:\"}),' ',new Date(latestMeasurement.timestamp).toLocaleString()]})]})]});}export default SensorStatus;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","SensorStatus","status","setStatus","latestMeasurement","setLatestMeasurement","console","log","fetch","then","res","json","data","timestamp","reportedTime","Date","now","diffMinutes","error","catch","err","children","style","background","color","padding","value","toLocaleString"],"sources":["/Users/connorvardakis/WebstormProjects/DenoLightPollution/frontend/src/SensorStatus.js"],"sourcesContent":["// src/SensorStatus.js\nimport React, { useState, useEffect } from 'react';\n\nfunction SensorStatus() {\n    const [status, setStatus] = useState(null);\n    const [latestMeasurement, setLatestMeasurement] = useState(null);\n    console.log(\"Getting status...\");\n\n    useEffect(() => {\n        // Adjust the URL if needed, e.g., http://localhost:8000/sensorData/latest\n        fetch('http://localhost:8000/sensorData/latest')\n            .then((res) => {\n                console.log(\"Response status:\", res.status);\n                return res.json();\n            })\n            .then((data) => {\n                console.log(\"Fetched sensor data:\", data);\n                setLatestMeasurement(data);\n\n                // Check if data contains a valid timestamp\n                if (data && data.timestamp) {\n                    const reportedTime = new Date(data.timestamp);\n                    const now = new Date();\n                    const diffMinutes = (now - reportedTime) / 1000 / 60;\n                    console.log(\"Time difference in minutes:\", diffMinutes);\n                    setStatus(diffMinutes <= 10 ? 'online' : 'offline');\n                } else {\n                    console.error(\"No valid timestamp in data:\", data);\n                }\n            })\n            .catch((err) => console.error('Error fetching sensor status:', err));\n    }, []);\n\n    return (\n        <div>\n            <h2>Sensor Status</h2>\n            <button\n                style={{\n                    background: status === 'online' ? 'green' : 'red',\n                    color: 'white',\n                    padding: '10px',\n                }}\n            >\n                {status ? (status === 'online' ? 'Online' : 'Offline') : 'Loading...'}\n            </button>\n            {latestMeasurement && (\n                <div>\n                    <p>\n                        <strong>Latest Measurement:</strong> {latestMeasurement.value} mag/arcsec<sup>2</sup>\n                    </p>\n                    <p>\n                        <strong>Timestamp:</strong>{' '}\n                        {new Date(latestMeasurement.timestamp).toLocaleString()}\n                    </p>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default SensorStatus;\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnD,QAAS,CAAAC,YAAYA,CAAA,CAAG,CACpB,KAAM,CAACC,MAAM,CAAEC,SAAS,CAAC,CAAGR,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACS,iBAAiB,CAAEC,oBAAoB,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CAChEW,OAAO,CAACC,GAAG,CAAC,mBAAmB,CAAC,CAEhCX,SAAS,CAAC,IAAM,CACZ;AACAY,KAAK,CAAC,yCAAyC,CAAC,CAC3CC,IAAI,CAAEC,GAAG,EAAK,CACXJ,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEG,GAAG,CAACR,MAAM,CAAC,CAC3C,MAAO,CAAAQ,GAAG,CAACC,IAAI,CAAC,CAAC,CACrB,CAAC,CAAC,CACDF,IAAI,CAAEG,IAAI,EAAK,CACZN,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEK,IAAI,CAAC,CACzCP,oBAAoB,CAACO,IAAI,CAAC,CAE1B;AACA,GAAIA,IAAI,EAAIA,IAAI,CAACC,SAAS,CAAE,CACxB,KAAM,CAAAC,YAAY,CAAG,GAAI,CAAAC,IAAI,CAACH,IAAI,CAACC,SAAS,CAAC,CAC7C,KAAM,CAAAG,GAAG,CAAG,GAAI,CAAAD,IAAI,CAAC,CAAC,CACtB,KAAM,CAAAE,WAAW,CAAG,CAACD,GAAG,CAAGF,YAAY,EAAI,IAAI,CAAG,EAAE,CACpDR,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAEU,WAAW,CAAC,CACvDd,SAAS,CAACc,WAAW,EAAI,EAAE,CAAG,QAAQ,CAAG,SAAS,CAAC,CACvD,CAAC,IAAM,CACHX,OAAO,CAACY,KAAK,CAAC,6BAA6B,CAAEN,IAAI,CAAC,CACtD,CACJ,CAAC,CAAC,CACDO,KAAK,CAAEC,GAAG,EAAKd,OAAO,CAACY,KAAK,CAAC,+BAA+B,CAAEE,GAAG,CAAC,CAAC,CAC5E,CAAC,CAAE,EAAE,CAAC,CAEN,mBACIpB,KAAA,QAAAqB,QAAA,eACIvB,IAAA,OAAAuB,QAAA,CAAI,eAAa,CAAI,CAAC,cACtBvB,IAAA,WACIwB,KAAK,CAAE,CACHC,UAAU,CAAErB,MAAM,GAAK,QAAQ,CAAG,OAAO,CAAG,KAAK,CACjDsB,KAAK,CAAE,OAAO,CACdC,OAAO,CAAE,MACb,CAAE,CAAAJ,QAAA,CAEDnB,MAAM,CAAIA,MAAM,GAAK,QAAQ,CAAG,QAAQ,CAAG,SAAS,CAAI,YAAY,CACjE,CAAC,CACRE,iBAAiB,eACdJ,KAAA,QAAAqB,QAAA,eACIrB,KAAA,MAAAqB,QAAA,eACIvB,IAAA,WAAAuB,QAAA,CAAQ,qBAAmB,CAAQ,CAAC,IAAC,CAACjB,iBAAiB,CAACsB,KAAK,CAAC,aAAW,cAAA5B,IAAA,QAAAuB,QAAA,CAAK,GAAC,CAAK,CAAC,EACtF,CAAC,cACJrB,KAAA,MAAAqB,QAAA,eACIvB,IAAA,WAAAuB,QAAA,CAAQ,YAAU,CAAQ,CAAC,CAAC,GAAG,CAC9B,GAAI,CAAAN,IAAI,CAACX,iBAAiB,CAACS,SAAS,CAAC,CAACc,cAAc,CAAC,CAAC,EACxD,CAAC,EACH,CACR,EACA,CAAC,CAEd,CAEA,cAAe,CAAA1B,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}